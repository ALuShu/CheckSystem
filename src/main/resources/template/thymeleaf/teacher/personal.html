<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>个人主页</title>
    <link rel="stylesheet" href="../layui/css/layui.css" type="text/css">

</head>
<body>
<div class="layui-layout layui-layout-admin">

    <div class="layui-header layui-bg-gray">

        <div class="layui-logo" style="font-size: 20px; color: #393D49; cursor: pointer" onclick="index()">作业查重系统教师端
        </div>

        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="/teacher/personal" style="color: #393D49">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img"><span th:text="${current.realname}"></span>
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;">基本资料</a></dd>
                    <dd><a href="/teacher/edit">发布通知</a></dd>
                    <dd><a href="/teacher/update">修改密码</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a id="logout" href="javascript:;" style="color: #393D49">注销</a></li>
        </ul>
    </div>

    <div class="layui-bg-green">
        <!-- 内容主体区域 -->
        <div style="padding: 5px; width: 80%; margin: auto">
            <div class="layui-row layui-col-space5 layui-bg-gray">
                <div class="layui-col-md12">
                    <div class="layui-row grid-demo">

                        <!-- 左侧内容 -->
                        <div class="layui-col-md7">
                            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                                <legend>最近批改作业</legend>
                            </fieldset>
                            <table id="fileTable" class="layui-table" lay-filter="fileTable"></table>
                        </div>

                        <!-- 右侧内容 -->
                        <div class="layui-col-md5  grid-demo">
                                <fieldset class="layui-elem-field">
                                    <legend>最近通知</legend>
                                    <div class="layui-field-box">
                                        <table id="informTable" class="layui-table" lay-filter="informTable"></table>
                                        <a href="javascript:;" style="float: right; color: #FF5722">>>查看更多</a>
                                    </div>
                                </fieldset>
                                <fieldset class="layui-elem-field">
                                    <legend>最近提交</legend>
                                    <div class="layui-field-box">
                                        <table id="uploadTable" class="layui-table" lay-filter="uploadTable"></table>
                                        <a href="javascript:;" style="float: right; color: #FF5722">>>查看更多</a>
                                    </div>
                                </fieldset>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- 方法 -->
<script src="../webjars/jquery/3.4.1/jquery.js"></script>
<script src="../layui/layui.js" type="text/javascript"></script>
<script th:inline="none">

    function index() {
        window.location = "/teacher/index"
    }

    $('#logout').click(function () {
        layer.confirm('确定退出系统吗',function () {
            window.location="/logout";
        })
    });

    layui.use(['form','table','element'], function () {
        var form = layui.form
            ,element = layui.element
            ,table = layui.table;

        table.render({
            elem: '#fileTable'
            , url: '/teacher/recentWorks'
            , limit: 15
            , height: 'full-170'
            , page: {
                layout: ['prev', 'page', 'next', 'skip', 'count']
                , groups: 5
            }
            , cols: [[
                {field: 'name', title: '文件名', sort: true}
                , {field: 'updateTime', title: '修改日期', sort: true}
                , {field: 'size', title: '文件大小', sort: true}
                , {field: 'type', title: '文件类型'}
            ]]
        });

        table.render({
            elem: '#informTable'
            , url: '/teacher/recentInform'
            , limit: 6
            , height: 210
            , width: 450
            , skin :'nob'
            , size :'sm'
            , cols: [[
                {field: 'content'}
                , {field: 'date'}
                , {field: 'type', width:60}
            ]]
        });

        table.render({
            elem: '#uploadTable'
            , url: '/teacher/recentSubmit'
            , limit: 6
            , height: 210
            , width: 450
            , skin :'nob'
            , size :'sm'
            , cols: [[
                {field: 'name'}
                , {field: 'updateTime'}
                , {field: 'size'}
                , {field: 'type'}
            ]]
        });

        //监听行单击事件
        table.on('row(fileTable)', function(obj){
            layer.alert(JSON.stringify(obj.data)) //得到当前行数据
        });

        //监听行单击事件
        table.on('row(informTable)', function(obj){
            layer.alert(JSON.stringify(obj.data)) //得到当前行数据
        });

        //监听行单击事件
        table.on('row(uploadTable)', function(obj){
            layer.alert(JSON.stringify(obj.data)) //得到当前行数据
        });

    });


</script>
</body>
</html>
